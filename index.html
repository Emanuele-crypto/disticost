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">
    
    <!-- Tag per dispositivi mobili e app web -->
    <meta name="theme-color" content="#005500">
    <meta name="application-name" content="Analisi Distillato">
    <meta name="mobile-web-app-capable" content="yes">
    
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 5px;
        }
        h1 {
            text-align: center;
            color: #005500;
            margin-bottom: 30px;
            border-bottom: 2px solid #eaeaea;
            padding-bottom: 10px;
        }
        .section {
            margin-bottom: 30px;
        }
        .input-group {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        .input-group label {
            width: 280px;
            font-weight: bold;
        }
        .input-group input, .input-group select {
            width: 120px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .input-group .unit {
            margin-left: 10px;
            color: #666;
            width: 60px;
        }
        .section-title {
            background-color: #005500;
            color: white;
            padding: 10px 15px;
            margin: 20px 0 15px 0;
            border-radius: 4px;
            font-weight: bold;
            font-size: 16px;
        }
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .results-table th, .results-table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        .results-table th {
            background-color: #f0f0f0;
            font-weight: bold;
        }
        .results-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .results-table .numeric {
            text-align: right;
        }
        .results-table .highlight {
            background-color: #e6f7ff;
            font-weight: bold;
        }
        .calculate-btn {
            padding: 10px 20px;
            background-color: #005500;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            display: block;
            margin: 20px auto;
            transition: background-color 0.3s;
        }
        .calculate-btn:hover {
            background-color: #003300;
        }
        .chart-container {
            width: 100%;
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }
        .pie-chart {
            width: 350px;
            height: 350px;
        }
        .results-summary {
            background-color: #f0fff0;
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
            border-left: 4px solid #005500;
        }
        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        .summary-item .label {
            font-weight: bold;
        }
        .profit-positive {
            color: green;
        }
        .profit-negative {
            color: red;
        }
        .two-columns {
            display: flex;
            gap: 20px;
        }
        .column {
            flex: 1;
        }
        @media (max-width: 768px) {
            .two-columns {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Analisi dei costi distillato</h1>
        
        <div class="section">
            <div class="section-title">Informazioni generali</div>
            
            <div class="two-columns">
                <div class="column">
                    <div class="input-group">
                        <label for="distillateType">Tipo di distillato:</label>
                        <select id="distillateType">
                            <option value="MANDARINO">MANDARINO</option>
                            <option value="LIMONE">LIMONE</option>
                            <option value="ARANCIA">ARANCIA</option>
                        </select>
                        <div class="unit"></div>
                    </div>
                    
                    <div class="input-group">
                        <label for="processCapacity">Capacità di lavorazione:</label>
                        <input type="number" id="processCapacity" value="4200">
                        <div class="unit">Lt/h</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="distillAmount">Quantità da distillare:</label>
                        <input type="number" id="distillAmount" value="50000">
                        <div class="unit">Lt</div>
                    </div>
                </div>
                
                <div class="column">
                    <div class="input-group">
                        <label for="oilConcentration">Concentrazione di olio:</label>
                        <input type="number" id="oilConcentration" value="2.7" step="0.1">
                        <div class="unit">‰</div>
                    </div>
                    
                    <!-- Portata vapore nascosta -->
                    <input type="hidden" id="steamFlow" value="1500">
                    
                    <div class="input-group">
                        <label for="operatorMachines">Impianti per operatore:</label>
                        <input type="number" id="operatorMachines" value="1">
                        <div class="unit">n°</div>
                    </div>
                </div>
            </div>
            
            <!-- Parametri di costo nascosti -->
            <input type="hidden" id="gasPrice" value="0.42">
            <input type="hidden" id="electricityPrice" value="0.21">
            <input type="hidden" id="boilerEfficiency" value="95">
            <input type="hidden" id="laborPrice" value="30">
            <input type="hidden" id="waterPrice" value="0.001">
            <input type="hidden" id="steamPerCubicMeterGas" value="18.16">
            
            <button class="calculate-btn" onclick="calculateResults()">Calcola</button>
            
            <!-- Hidden inputs for calculations -->
            <input type="hidden" id="vacuumPumpPower" value="13">
            <input type="hidden" id="recyclingPumpsPower" value="17.46">
            <input type="hidden" id="smallPumpsPower" value="4.48">
            <input type="hidden" id="wellPumpPower" value="6">
            <input type="hidden" id="centrifugePower" value="15">
            <input type="hidden" id="tanksPower" value="1.5">
            <input type="hidden" id="waterConsumption" value="7000">
        </div>
        
        <div class="section" id="resultsSection" style="display: none;">
            <div class="section-title">Costi per ciclo</div>
            
            <div class="results-summary">
                <div class="summary-item">
                    <span class="label">Durata ciclo:</span>
                    <span id="cycleDuration">-</span>
                </div>
                <div class="summary-item">
                    <span class="label">Olio recuperato:</span>
                    <span id="recoveredOil">-</span>
                </div>
                <div class="summary-item">
                    <span class="label">Costo totale:</span>
                    <span id="totalCostSummary">-</span>
                </div>
                <div class="summary-item">
                    <span class="label">Costo per litro:</span>
                    <span id="costPerLiterSummary">-</span>
                </div>
            </div>
            
            <!-- Tabella delle voci di costo nascosta, ma manteniamo i div per gli ID -->
            <div style="display: none;">
                <span id="gasCost"></span>
                <span id="electricityCost"></span>
                <span id="laborCost"></span>
                <span id="waterCost"></span>
                <span id="totalCost"></span>
                <span id="gasPercentage"></span>
                <span id="electricityPercentage"></span>
                <span id="laborPercentage"></span>
                <span id="waterPercentage"></span>
            </div>
            
            <div class="chart-container">
                <canvas id="costPieChart" class="pie-chart"></canvas>
            </div>
            
            <div class="section-title">Analisi profitto</div>
            
            <table class="results-table">
                <tr>
                    <th>Parametro</th>
                    <th>Per litro (€/Lt)</th>
                    <th>Totale (€)</th>
                </tr>
                <tr>
                    <td>Prezzo di vendita</td>
                    <td id="sellingPricePerLiter" class="numeric">-</td>
                    <td id="totalSellingPrice" class="numeric">-</td>
                </tr>
                <tr>
                    <td>Costo produzione</td>
                    <td id="productionCostPerLiter" class="numeric">-</td>
                    <td id="totalProductionCost" class="numeric">-</td>
                </tr>
                <tr class="highlight">
                    <td><strong>Profitto</strong></td>
                    <td id="profitPerLiter" class="numeric">-</td>
                    <td id="totalProfit" class="numeric">-</td>
                </tr>
            </table>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

    <script>
        // Variabile per il grafico a torta
        let costPieChart = null;
        
        // Funzione principale di calcolo
        function calculateResults() {
            // Mostra la sezione dei risultati
            document.getElementById('resultsSection').style.display = 'block';
            
            // Recupero input principali
            const distillateType = document.getElementById('distillateType').value;
            const processCapacity = parseFloat(document.getElementById('processCapacity').value);
            const distillAmount = parseFloat(document.getElementById('distillAmount').value);
            const steamFlow = parseFloat(document.getElementById('steamFlow').value);
            const oilConcentration = parseFloat(document.getElementById('oilConcentration').value);
            const operatorMachines = parseFloat(document.getElementById('operatorMachines').value);
            
            // Recupero costi unitari
            const gasPrice = parseFloat(document.getElementById('gasPrice').value);
            const electricityPrice = parseFloat(document.getElementById('electricityPrice').value);
            const laborPrice = parseFloat(document.getElementById('laborPrice').value);
            const waterPrice = parseFloat(document.getElementById('waterPrice').value);
            
            // Recupero parametri nascosti
            const vacuumPumpPower = parseFloat(document.getElementById('vacuumPumpPower').value);
            const recyclingPumpsPower = parseFloat(document.getElementById('recyclingPumpsPower').value);
            const smallPumpsPower = parseFloat(document.getElementById('smallPumpsPower').value);
            const wellPumpPower = parseFloat(document.getElementById('wellPumpPower').value);
            const centrifugePower = parseFloat(document.getElementById('centrifugePower').value);
            const tanksPower = parseFloat(document.getElementById('tanksPower').value);
            const waterConsumption = parseFloat(document.getElementById('waterConsumption').value);
            const boilerEfficiency = parseFloat(document.getElementById('boilerEfficiency').value);
            const steamPerCubicMeterGas = parseFloat(document.getElementById('steamPerCubicMeterGas').value);
            
            // Calcoli intermedi
            const cycleDuration = (distillAmount / processCapacity) + 1.5;
            const operatorHours = cycleDuration;
            const totalVolume = distillAmount;
            const recoveredOil = totalVolume / 1000 * oilConcentration;
            const gasConsumption = (steamFlow * cycleDuration) / steamPerCubicMeterGas;
            
            // Consumi elettrici
            const vacuumPumpConsumption = vacuumPumpPower * cycleDuration;
            const pumpConsumption = (recyclingPumpsPower + smallPumpsPower + wellPumpPower) * cycleDuration;
            const utilitiesConsumption = (centrifugePower + tanksPower) * cycleDuration;
            const totalElectricityConsumption = vacuumPumpConsumption + pumpConsumption + utilitiesConsumption;
            
            // Calcolo costi
            const gasCost = Math.round(gasConsumption * gasPrice * 100) / 100;
            const electricityCost = totalElectricityConsumption * electricityPrice;
            const laborCost = laborPrice * operatorHours / operatorMachines;
            const waterCost = waterConsumption * waterPrice;
            
            // Costo totale
            const totalCost = gasCost + electricityCost + laborCost + waterCost;
            const costPerLiter = totalCost / recoveredOil;
            
            // Percentuali costi
            const gasPercentage = (gasCost / totalCost) * 100;
            const electricityPercentage = (electricityCost / totalCost) * 100;
            const laborPercentage = (laborCost / totalCost) * 100;
            const waterPercentage = (waterCost / totalCost) * 100;
            
            // Calcolo prezzo di vendita e profitto in base al tipo di distillato
            let sellingPricePerLiter = 0;
            if (distillateType === "MANDARINO") {
                sellingPricePerLiter = 30;
            } else if (distillateType === "LIMONE") {
                sellingPricePerLiter = 20;
            } else if (distillateType === "ARANCIA") {
                sellingPricePerLiter = 15;
            }
            
            const totalSellingPrice = sellingPricePerLiter * recoveredOil;
            const profitPerLiter = sellingPricePerLiter - costPerLiter;
            const totalProfit = totalSellingPrice - totalCost;
            
            // Aggiornamento output summary
            document.getElementById('cycleDuration').textContent = cycleDuration.toFixed(2) + " ore";
            document.getElementById('recoveredOil').textContent = recoveredOil.toFixed(2) + " litri";
            document.getElementById('totalCostSummary').textContent = totalCost.toFixed(2) + " €";
            document.getElementById('costPerLiterSummary').textContent = costPerLiter.toFixed(2) + " €/Lt";
            
            // Aggiornamento elementi nascosti per i calcoli
            document.getElementById('gasCost').textContent = gasCost.toFixed(2);
            document.getElementById('electricityCost').textContent = electricityCost.toFixed(2);
            document.getElementById('laborCost').textContent = laborCost.toFixed(2);
            document.getElementById('waterCost').textContent = waterCost.toFixed(2);
            document.getElementById('totalCost').textContent = totalCost.toFixed(2);
            
            document.getElementById('gasPercentage').textContent = gasPercentage.toFixed(2) + "%";
            document.getElementById('electricityPercentage').textContent = electricityPercentage.toFixed(2) + "%";
            document.getElementById('laborPercentage').textContent = laborPercentage.toFixed(2) + "%";
            document.getElementById('waterPercentage').textContent = waterPercentage.toFixed(2) + "%";
            
            // Aggiornamento tabella profitti
            document.getElementById('sellingPricePerLiter').textContent = sellingPricePerLiter.toFixed(2);
            document.getElementById('totalSellingPrice').textContent = totalSellingPrice.toFixed(2);
            document.getElementById('productionCostPerLiter').textContent = costPerLiter.toFixed(2);
            document.getElementById('totalProductionCost').textContent = totalCost.toFixed(2);
            document.getElementById('profitPerLiter').textContent = profitPerLiter.toFixed(2);
            document.getElementById('totalProfit').textContent = totalProfit.toFixed(2);
            
            // Colorazione del profitto (verde se positivo, rosso se negativo)
            const profitElements = [document.getElementById('profitPerLiter'), document.getElementById('totalProfit')];
            profitElements.forEach(el => {
                if (profitPerLiter > 0) {
                    el.classList.add('profit-positive');
                    el.classList.remove('profit-negative');
                } else {
                    el.classList.add('profit-negative');
                    el.classList.remove('profit-positive');
                }
            });
            
            // Aggiornamento grafico a torta
            updateCostPieChart(gasCost, electricityCost, laborCost, waterCost);
        }
        
        // Funzione per aggiornare il grafico a torta
        function updateCostPieChart(gasCost, electricityCost, laborCost, waterCost) {
            const ctx = document.getElementById('costPieChart').getContext('2d');
            
            // Distruggi il grafico precedente se esiste
            if (costPieChart) {
                costPieChart.destroy();
            }
            
            costPieChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Gas naturale', 'Elettricità', 'Personale', 'Acqua'],
                    datasets: [{
                        data: [gasCost, electricityCost, laborCost, waterCost],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                font: {
                                    size: 14
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Ripartizione dei costi',
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    return `${label}: ${value.toFixed(2)} € (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Esegui calcolo iniziale
        document.addEventListener('DOMContentLoaded', calculateResults);
    </script>
</body>
</html>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">
    
    <!-- Per iPhone con display Retina -->
   <!-- Icona personalizzata -->
<link rel="icon" href="logo.png" type="image/png">
<!-- Per iOS -->
<link rel="apple-touch-icon" href="logo.png">
<link rel="apple-touch-icon" sizes="180x180" href="logo.png">
<link rel="apple-touch-icon" sizes="152x152" href="logo.png">
<link rel="apple-touch-icon" sizes="167x167" href="logo.png">
